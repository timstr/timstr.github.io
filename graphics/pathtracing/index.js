!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=33)}([function(e,t){e.exports=React},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePathPrettyName=t.pathUpOne=t.getPathHeadName=t.getPathSiblings=t.makePathFileName=t.pathContains=t.__DoNotUse_SafetyCheck_B__=t.__DoNotUse_SafetyCheck_A__=void 0;const n=["Tim's Portfolio",{index:"About Me",machine_learning:["Machine Learning",{index:"List of Projects",graph_merging:"Differentiable Graph Merging",monocamlegoslam:"Line Segment SLAM",boneless:"Soft-Bodied Locomotion",hand_gesture_recognition:"Hand Gesture Recognition",hand_gesture_synthesis:"Hand Gesture Synthesis"}],audio:["Audio",{flosion:["Flosion",{index:"About",howitworks:"How It Works",implementation:"Implementation",examples:"Examples",gallery:"Song Gallery"}]}],graphics:["Graphics",{pathtracing:["Path Tracing",{index:"About",gallery:"Gallery"}],fractals2d:["2D Fractals",{index:"About",gallery:"Gallery"}],fractals3d:["3D Fractals (Old)",{index:"About",gallery:"Gallery"}],cellularautomata:"Cellular Automata"}],physics:["Physics",{rigidbodydynamics:["Rigid Body Dynamics",{index:"About",circleboxstacking:"Circle Box Stacking",boxchain:"Box Chain",frictiondemo:"Friction Demo",frictionlessboxes:"Frictionless Boxes",circlepile:"Circle Pile",images:"Images"}]}],artwork:["Artwork",{index:"Selected Works",gallery:"Gallery",ti84plus:"TI-84 Plus Graphing Calculator"}],personal:["Personal Stuff",{index:"Tim Doing Things",taipan:"Tai Pan Server",mushrooms:"Mushroom Photography",recipes:"Recipes"}]}];function r(e){let t=n[1];for(let a of e.slice(0,e.length-1))t=t[a][1];const a=t[e[e.length-1]];return"string"==typeof a?a:a[0]}function i(e){return 1===e.length?null:e.slice(0,e.length-1)}t.__DoNotUse_SafetyCheck_A__=e=>{},t.__DoNotUse_SafetyCheck_B__=()=>t.__DoNotUse_SafetyCheck_A__(n),t.pathContains=function(e,t){for(let a=0;a<t.length;++a){if(a>e.length)return"index"===t[a];if(t[a]!==e[a])return!1}return!0},t.makePathFileName=function(e){let t=e,a=n[1];for(let t of e.slice(0,e.length-1))a=a[t][1];let r=a[e[e.length-1]];for(;Array.isArray(r);)if(r=r[1],"object"==typeof r){const e=Object.keys(r)[0];t.push(e),r=r[e]}return"/"+t.join("/")+".html"},t.getPathSiblings=function(e){let t=[],a=n[1],r=[];for(let n of e){const e=Object.keys(a);t.push(e.map(e=>r.concat([e]))),r.push(n),a=a[n],"string"==typeof a?a=null:Array.isArray(a)&&(a=a[1])}return t},t.getPathHeadName=r,t.pathUpOne=i,t.makePathPrettyName=function(e,t,a,n){void 0===a&&(a=" | "),void 0===n&&(n="Tim's Portfolio");let l=e,s=[];for(;null!==l;)s.push(r(l)),l=i(l);return""!==n&&s.push(n),"RootToLeaf"===t&&(s=s.reverse()),s.join(a)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linearMix=t.Color=void 0;class n{constructor(e,t,a,n){this._r=0,this._g=0,this._b=0,this._a=1,"string"==typeof e?this.parseHexString(e):"number"==typeof e&&(this._r=e,this._g=t,this._b=a,this._a=void 0===n?1:n)}get red(){return this._r}get green(){return this._g}get blue(){return this._b}get alpha(){return this._a}set red(e){this._r=Math.min(Math.max(e,0),1)}set green(e){this._g=Math.min(Math.max(e,0),1)}set blue(e){this._b=Math.min(Math.max(e,0),1)}set alpha(e){this._a=Math.min(Math.max(e,0),1)}toHexString(){return"#"+this.toHexByte(this._r)+this.toHexByte(this._g)+this.toHexByte(this._b)+this.toHexByte(this._a)}clone(){return new n(this._r,this._g,this._b,this._a)}parseHexString(e){if(/^#[0-9a-fA-F]*$/.test(e)){if(4===e.length)return this._r=parseInt(e.slice(1,2),16)/15,this._g=parseInt(e.slice(2,3),16)/15,this._b=parseInt(e.slice(3,4),16)/15,void(this._a=1);if(5===e.length)return this._r=parseInt(e.slice(1,2),16)/15,this._g=parseInt(e.slice(2,3),16)/15,this._b=parseInt(e.slice(3,4),16)/15,void(this._a=parseInt(e.slice(4,5),16)/15);if(7===e.length)return this._r=parseInt(e.slice(1,3),16)/255,this._g=parseInt(e.slice(3,5),16)/255,this._b=parseInt(e.slice(5,7),16)/255,void(this._a=1);if(9===e.length)return this._r=parseInt(e.slice(1,3),16)/255,this._g=parseInt(e.slice(3,5),16)/255,this._b=parseInt(e.slice(5,7),16)/255,void(this._a=parseInt(e.slice(7,9),16)/255)}throw Error("Invalid hexadecimal color string")}toHexByte(e){const t=Math.min(Math.max(Math.round(255*e),0),255).toString(16);return 1==t.length?"0"+t:t}}t.Color=n,t.linearMix=function(e,t,a){const r=void 0===a?.5:a,i=1-r;return new n(e.red*i+t.red*r,e.green*i+t.green*r,e.blue*i+t.blue*r,e.alpha*i+t.alpha*r)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalLink=t.Link=void 0;const n=a(0),r=a(1);t.Link=e=>n.createElement("a",{href:e.dst,target:"_blank",rel:"noopener noreferrer"},e.children),t.LocalLink=e=>n.createElement("a",{href:r.makePathFileName(e.dst)},e.children)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabMenuItem=void 0;const n=a(0);class r extends n.Component{constructor(e){super(e),this.startHover=()=>{this.setState({hover:!0})},this.stopHover=()=>{this.setState({hover:!1})},this.state={hover:!1}}render(){let e=this.props.color;this.props.active&&this.props.activeColor?e=this.props.activeColor:this.state.hover&&this.props.hoverColor&&(e=this.props.hoverColor);const t={backgroundColor:e.toHexString()};return n.createElement("div",{className:this.props.active?"tabmenuitem-active":"tabmenuitem",style:t,onClick:this.props.onClick,onMouseEnter:this.startHover,onMouseLeave:this.stopHover},n.createElement("span",{className:"tabmenuitem-title"},this.props.title))}}t.TabMenuItem=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderPage=void 0;const n=a(0),r=a(6),i=a(1),l=a(7);t.renderPage=function(e,t){r.render(n.createElement(l.Main,{currentTab:e},t),document.getElementById("main")),document.title=i.makePathPrettyName(e,"LeafToRoot")}},function(e,t){e.exports=ReactDOM},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;const n=a(0),r=a(8),i=a(2),l=[new i.Color("#626289"),new i.Color("#FFFFFF"),new i.Color("#DDDDDD"),new i.Color("#FFFFFF"),new i.Color("#DDDDDD")];t.Main=e=>n.createElement(n.Fragment,null,n.createElement("div",{className:"backdrop"}),n.createElement("div",{className:"maincontainer"},n.createElement("div",{className:"mainbody"},n.createElement("h1",{className:"mainheader"},"Tim's Portfolio"),n.createElement(r.StaticTabMenuStack,{currentTab:e.currentTab,colours:l,children:e.children}))))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaticTabMenuStack=void 0;const n=a(0),r=a(2),i=a(4),l=a(1),s=a(3),o=e=>{const t=r.linearMix(e.backgroundColor,e.contentColor,.5),a=r.linearMix(t,new r.Color("#fff"),.5);return n.createElement("div",{className:"tabmenu",style:{backgroundColor:e.backgroundColor.toHexString()}},n.createElement("div",{className:"tabmenu-list"},e.tabs.map(r=>(r=>{const o=l.getPathHeadName(r);return n.createElement(s.LocalLink,{dst:r,key:o},n.createElement(i.TabMenuItem,{active:l.pathContains(e.currentTab,r),title:o,color:t,hoverColor:a,activeColor:e.contentColor,onClick:()=>{}}))})(r))),n.createElement("div",{className:"tab-content",style:{backgroundColor:e.contentColor.toHexString()}},e.children))};t.StaticTabMenuStack=e=>{const t=l.getPathSiblings(e.currentTab);let a=e.children;const r=t=>e.colours[t%e.colours.length];let i=t.length,s=r(i);for(let l of t.reverse()){i-=1;const t=r(i);a=n.createElement(o,{backgroundColor:t,contentColor:s,currentTab:e.currentTab,tabs:l},a),s=t}return n.createElement(n.Fragment,null,a)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubSection=t.Section=void 0;const n=a(0);t.Section=e=>n.createElement("div",{className:"section"},n.createElement("div",{className:"section-heading"},n.createElement("div",{className:"section-contents"},e.header)),n.createElement("div",{className:"section-body"},n.createElement("div",{className:"section-contents"},e.children))),t.SubSection=e=>n.createElement("div",{className:"subsection"},e.children)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BigImage=void 0;const n=a(0);t.BigImage=e=>{const t="/static/img/"+e.name+(e.name.includes(".")?"":".png");return n.createElement("div",{className:"bigimage"},n.createElement("img",{className:"bigimage-img",src:t}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyImage=void 0;const n=a(0);class r extends n.Component{constructor(e){super(e),this.handleLoad=()=>{this.setState({loaded:!0})},this.state={loaded:!1}}render(){const e=this.props.className?" "+this.props.className:"";return n.createElement("div",{className:"lazyimage-container"},n.createElement("img",{key:this.props.src,className:"lazyimage"+e,src:"/static/img/"+this.props.src,width:this.props.width,height:this.props.height,onLoad:this.handleLoad,style:{opacity:this.state.loaded?1:0}}),this.state.loaded?null:n.createElement("div",{className:"lazyimage-loading"},"Loading..."))}}t.LazyImage=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListOfImageIcons=t.ImageIcon=void 0;const n=a(0),r=a(11),i=a(3),l=e=>{const t=e.lastIndexOf(".");return t<0?e+"_small.png":e.substring(0,t)+"_small"+e.substring(t)};t.ImageIcon=e=>{return n.createElement("div",{className:"pieceicon"},n.createElement(i.Link,{dst:"/static/img/"+(t=e.image,t.lastIndexOf(".")>0?t:t+".png")},n.createElement(r.LazyImage,{className:"pieceicon-img",src:""+l(e.image)})));var t},t.ListOfImageIcons=e=>n.createElement(n.Fragment,null,e.fileNames.map(a=>{const r=e.folderName+"/"+a;return n.createElement(t.ImageIcon,{image:r,key:r})}))},,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),r=a(10),i=a(12),l=a(11),s=a(3),o=a(9);a(5).renderPage(["graphics","pathtracing","index"],n.createElement(n.Fragment,null,n.createElement("h1",null,"Path Tracing"),n.createElement(r.BigImage,{name:"pathtracing/blockball05"}),n.createElement(o.Section,{header:n.createElement("h2",null,"Overview")},n.createElement("h2",null,"How it works"),n.createElement("p",null,"Path tracing, like conventional computer rendering, draws 3D objects as seen by a virtual camera by finding where lines of sight from the camera intersect with nearby objects. Unlike conventional rendering, when a ray of light hits an obstacle, path tracing simulates multiple additional bouncing rays which contribute light to the original point that was hit. Path tracing is able to faithfully reproduce many real-world phenomena, such as global illumination, depth of field, caustics, and a large variety of material properties. The recursive nature of path tracing, as well as the large number of simulated rays per pixel that are needed for smooth images, can make a naive implementation of a path tracer quite slow."),n.createElement("p",null,n.createElement(i.ImageIcon,{image:"pathtracing/blockball09"})),n.createElement("p",null,"My implementation of a path tracer is of the naive variety, and so it converges very slowly for scenes with very few, small, bright light sources (which unfortunately describes most natural scenes). Most of the images you'll see here are flooded with light and light-emitting surfaces, which converges more quickly and gives a delightfully other-wordly if not quite realistic look."),n.createElement("p",null,"The simple representation of light rays bouncing off surfaces that path tracing uses makes it remarkably easy to implement a large number of pleasing optical effects with simple vector calculus, including",n.createElement("ul",null,n.createElement("li",null,"Specular reflections"),n.createElement("li",null,"Diffuse reflections"),n.createElement("li",null,"Glossy reflections"),n.createElement("li",null,"Refraction"),n.createElement("li",null,"Caustics"),n.createElement("li",null,"Depth of field")),"among others."),n.createElement("p",null,"My pather tracer is designed to be fairly agnostic to the geometric representations of objects it's rendering, as long as one can find points of intersections with rays and surface normals. At the moment, rectangular prisms, spheres, triangles, and signed distance fields are implemented."),n.createElement("p",null,'In natural scenes, most of the computation of a path tracer is wasted by naively gathering light rays from dark areas, without giving direct and indirect light sources the extra attention they deserve. Building a better path tracer requires a good understanding of efficient probabilistic sampling that still remains accurate (or "unbiased"). I may attempt this in the future. But in the meantime, here are some pretty pictures.'),n.createElement("h2",null,"Source Code"),n.createElement("p",null,"The C++ implementation is available on"," ",n.createElement(s.Link,{dst:"https://github.com/timstr/pathtracer"},"GitHub"),".")),n.createElement(o.Section,{header:n.createElement("h2",null,"Surface Materials")},n.createElement("p",null,"Whenever a ray hits a surface, the light that is seen along that ray is gathered from three different major sources:",n.createElement("ul",null,n.createElement("li",null,"Light emitted by the surface itself, such as a light source or incandescing object"),n.createElement("li",null,"Rays that bounce off the surface and hit other light sources, which is reflection"),n.createElement("li",null,"Rays that pass through the surface before later leaving and hitting other light sources, which is refraction")),"Just about any physical material can be described by how it transmits, reflects, and refracts light according to where the material was hit, what angle it was hit at, and where other light sources are located relatively."),n.createElement("p",null,n.createElement(i.ImageIcon,{image:"pathtracing/spheres03"})),n.createElement("p",null,"Specular (or shiny) surfaces reflect incoming rays perfectly, which creates a crisp and detailed reflection. Diffuse (or matte) surfaces will randomly bounce rays in many different directions, which creates smooth and gradual shading."),n.createElement("p",null,n.createElement(i.ImageIcon,{image:"pathtracing/distantlight1"})),n.createElement("p",null,"Glossy materials produce a mixture of both specular and diffuse reflections. In the real world, glossy or diffuse materials often appear to become shinier at oblique angles. This easy to emulate in software, by attenuating the spread of diffuse reflections according to the incoming angle."),n.createElement("p",null,n.createElement(i.ImageIcon,{image:"pathtracing/specvsangle2"}),n.createElement(i.ImageIcon,{image:"pathtracing/specvsangle1"})),n.createElement("p",null,"Refraction is also fairly easy to implement, simply by allowing ray intersections to work through the insides of obstacles. The amount that light rays are bent according to the indicies of refraction is easily implemented using Snell's law. Slight specular highlights can be obtained simply by randomly choosing some light rays to reflect while allowing the rest to refract."),n.createElement("p",null,n.createElement(i.ImageIcon,{image:"pathtracing/refractionnoglass"}),n.createElement(i.ImageIcon,{image:"pathtracing/refraction"})),n.createElement("p",null,"Pictured above is a glass orb in front of a group of coloured glossy, glassy, and metallic spheres. The same spheres without the glass orb in front are pictured on the left for comparison. Note the inversion of features at the center of the image.")),n.createElement(o.Section,{header:n.createElement("h2",null,"Caustics")},n.createElement("h2",null,"What are caustics?"),n.createElement("p",null,"Caustics are when light from a single source is concentrated in a small spot from reflections and refractions, rather than spreading out normally. Real-world examples include the patterns of light behind glasses of water, the spots of light from a disco ball, and the ripples of light under a wavy water surface."),n.createElement("p",null,"In a path tracer, caustics are hard because they depend heavily on tiny light sources that are very difficult to hit with random sampling. They also depend on indirect and often convoluted sequences of light bounces, which makes reasoning about probabilistic sampling even more difficult. For these reason, they're often used as a sort of benchmark for how well a path tracer performs."),n.createElement("p",null,n.createElement(i.ImageIcon,{image:"pathtracing/caustic"})),n.createElement("p",null,"As has previously been stated, my path tracer is a naive implementation. The above image of a sphere of glass focusing light onto a plane was rendered at 65,536 samples per pixel which took forever. For this reason, I am not attempting to do any other work producing caustics here.")),n.createElement(o.Section,{header:n.createElement("h2",null,"Signed Distance Fields")},"My path tracer allows simple geometric solids and signed distance fields to coexist in the same scene. Signed distance fields are fun because while they can describe simple shapes, they can also be used to render fractals, such as the mandelbulb, on the fly. Ray intersect tests are performed using ray marching, and surface normals are computed using finite differences. The same materials used on basic shapes above can also be used here, at no extra cost.",n.createElement("p",null,n.createElement(i.ImageIcon,{image:"pathtracing/mandelbulbwhole"}),n.createElement(i.ImageIcon,{image:"pathtracing/mandelbulbtoplit"}),n.createElement(i.ImageIcon,{image:"pathtracing/mandelbulbtopglass"}))),n.createElement(o.Section,{header:n.createElement("h2",null,"Fun/Weird Stuff")},n.createElement("p",null,"Here's a fractal made simply by placing shiny spheres right beside each other, next to some glowing and green and blue spheres."),n.createElement("p",null,"(warning: large file)"),n.createElement("p",null,n.createElement(i.ImageIcon,{image:"pathtracing/fractalreflections"})),n.createElement("p",null,"And here's negative light in a Cornell box."),n.createElement("p",null,n.createElement(r.BigImage,{name:"pathtracing/negativelight"})),n.createElement("p",null,'On the top is a normal light source. When light rays hit the light source, their brightness increases. On the bottom is a negative light source (or "light sink") which decreases the amount of light returned by a bouncing light ray.'),n.createElement("p",null,"It makes no sense at all but the math is the same and it's fun to look at. Note the brighter shadows and brighter corners (negative ambient occlusion) near the bottom of the image."),n.createElement("p",null,"Sorry it's small and grainy. This was also slow to render.")),n.createElement(o.Section,{header:n.createElement("h2",null,"More")},n.createElement("p",null,"More images are located in the"," ",n.createElement(s.LocalLink,{dst:["graphics","pathtracing","gallery"]},"gallery"))),n.createElement(o.Section,{header:n.createElement("h2",null,"Even More")},n.createElement("p",null,"Please write to me via"," ",n.createElement(s.Link,{dst:"mailto:timstr@cs.ubc.ca"},"timstr@cs.ubc.ca")," and I will add more just for you")),n.createElement(o.Section,{header:n.createElement("h2",null,"Whoah Nice")},n.createElement("p",null,n.createElement(l.LazyImage,{src:"pathtracing/bouncey2.gif"})))))}]);